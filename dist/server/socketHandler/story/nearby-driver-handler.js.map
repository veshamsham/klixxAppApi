{"version":3,"sources":["server/socketHandler/story/nearby-driver-handler.js"],"names":["nearbyDriverHandler","socket","on","userRegion","coordinates","region","longitude","latitude","userId","user","_id","console","log","UserSchema","findOneAndUpdateAsync","$set","mapCoordinates","then","updatedUser","findAsync","$and","gpsLoc","$geoWithin","$centerSphere","config","radius","currTripId","currTripState","loginStatus","userType","isAvailable","driverArray","length","SocketStore","emitByUserId"],"mappings":";;;;;;;AACA;;AACA;;AACA;;;;AAHA;AAEyD;AAGzD,SAASA,mBAAT,CAA6BC,MAA7B,EAAqC;AACpCA,EAAAA,MAAM,CAACC,EAAP,CAAU,oBAAV,EAAgC,UAAAC,UAAU,EAAI;AAC7C;AACA;AACA;AACA;AACA;AACA,QAAMC,WAAW,GAAG,CAACD,UAAU,CAACE,MAAX,CAAkBC,SAAnB,EAA8BH,UAAU,CAACE,MAAX,CAAkBE,QAAhD,CAApB;AACA,QAAMC,MAAM,GAAGL,UAAU,CAACM,IAAX,CAAgBC,GAA/B,CAP6C,CAQ7C;AACA;AACA;AACA;;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYR,WAAZ;AACAO,IAAAA,OAAO,CAACC,GAAR,CAAYJ,MAAZ;;AACAK,qBAAWC,qBAAX,CAAiC;AAAEJ,MAAAA,GAAG,EAAEF;AAAP,KAAjC,EAAkD;AAAEO,MAAAA,IAAI,EAAE;AAAEC,QAAAA,cAAc,EAAEZ;AAAlB;AAAR,KAAlD,EAA6F;AAAE,aAAK;AAAP,KAA7F,EACEa,IADF,CACO,UAAAC,WAAW;AAAA,aAChBL,iBAAWM,SAAX,CAAqB;AACpBC,QAAAA,IAAI,EAAE,CACL;AACCC,UAAAA,MAAM,EAAE;AACPC,YAAAA,UAAU,EAAE;AACXC,cAAAA,aAAa,EAAE,CAACL,WAAW,CAACF,cAAb,EAA6BQ,gBAAOC,MAApC;AADJ;AADL;AADT,SADK,EAQL;AAAEC,UAAAA,UAAU,EAAE,IAAd;AAAoBC,UAAAA,aAAa,EAAE;AAAnC,SARK,EASL;AAAEC,UAAAA,WAAW,EAAE;AAAf,SATK,EAUL;AAAEC,UAAAA,QAAQ,EAAE;AAAZ,SAVK,EAWL;AAAEC,UAAAA,WAAW,EAAE;AAAf,SAXK;AADc,OAArB,CADgB;AAAA,KADlB,EAkBEb,IAlBF,CAkBO,UAAAc,WAAW,EAAI;AACpB,UAAIA,WAAJ,EAAiB;AAEhBpB,QAAAA,OAAO,CAACC,GAAR,CAAYmB,WAAW,CAACC,MAAxB,EAAgC,aAAhC;;AACAC,gCAAYC,YAAZ,CAAyB1B,MAAzB,EAAiC,mBAAjC,EAAsDuB,WAAtD;AACA;AACD,KAxBF;AAyBA,GAvCD;AAwCA;;eACc/B,mB","file":"nearby-driver-handler.js","sourceRoot":"../../../../../../.."}