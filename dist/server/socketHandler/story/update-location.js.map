{"version":3,"sources":["server/socketHandler/story/update-location.js"],"names":["updateLocationHandler","socket","on","userObj","userType","searchObj","riderId","_id","driverId","userID","UserSchema","findOneAndUpdateAsync","$set","gpsLoc","then","updatedUser","SocketStore","emitByUserId","TripRequestSchema","findOneAsync","$and","$or","tripRequestStatus","tripRequestObj","driverObj","changedTripRequestStatus","TripSchema","tripStatus","tripObj","error","e","dist","srcLoc","newTripRequestStatus","currentTripRequestStatus","toFixed","console","log","config","arrivedDistance","arrivingDistance","updatedTripRequestObj","updatedTripRequestObj123","err","message","data"],"mappings":"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","file":"update-location.js","sourceRoot":"../../../../../../.."}