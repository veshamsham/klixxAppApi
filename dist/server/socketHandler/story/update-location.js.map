{"version":3,"sources":["server/socketHandler/story/update-location.js"],"names":["updateLocationHandler","socket","on","userObj","userType","searchObj","riderId","_id","driverId","userID","console","log","UserSchema","findOneAndUpdateAsync","$set","gpsLoc","then","updatedUser","SocketStore","emitByUserId","TripRequestSchema","findOneAsync","$and","$or","tripRequestStatus","tripRequestObj","driverObj","changedTripRequestStatus","TripSchema","tripStatus","tripObj","error","e","dist","srcLoc","newTripRequestStatus","currentTripRequestStatus","toFixed","config","arrivedDistance","arrivingDistance","updatedTripRequestObj","updatedTripRequestObj123","err","message","data"],"mappings":"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","file":"update-location.js","sourceRoot":"../../../../../../.."}