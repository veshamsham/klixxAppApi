{"version":3,"sources":["server/controllers/notification.js"],"names":["createNotification","type","data","saveInDB","makePostNotificationData","notifyData","User","find","followings","$in","userId","then","result","allPromises","map","item","_id","Notification","link","postId","toDisplayUser","date","Date","now","error","console","log","Array","isArray","insertMany","notification","saveAsync","getNotification","req","res","next","notifications","user","populate","updateMany","hasRead","value","send","success","message","markNotificationAsRead","findOneAndUpdate","params","id","err","deleteNotification","findOneAndDelete"],"mappings":"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","file":"notification.js","sourceRoot":"../../../../.."}