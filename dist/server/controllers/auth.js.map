{"version":3,"sources":["server/controllers/auth.js"],"names":["testServer","req","res","next","send","success","message","loginadmin","UserSchema","findOneAsync","email","body","$or","userType","then","user","err","APIError","httpStatus","NOT_FOUND","comparePassword","password","passwordError","isMatch","UNAUTHORIZED","loginStatus","gpsLoc","lat","lon","token","jwt","sign","toJSON","config","jwtSecret","findOneAndUpdateAsync","_id","$set","updatedUser","returnObj","data","jwtAccessToken","json","error","err123","INTERNAL_SERVER_ERROR","e","login","console","log","userObj","logout","undefined","isAvailable","findOneAndUpdate","userDoc","checkUser","foundUser"],"mappings":"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","file":"auth.js","sourceRoot":"../../../../.."}