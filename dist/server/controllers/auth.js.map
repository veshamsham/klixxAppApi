{"version":3,"sources":["server/controllers/auth.js"],"names":["loginadmin","req","res","next","UserSchema","findOneAsync","email","body","$or","userType","then","user","err","APIError","httpStatus","NOT_FOUND","comparePassword","password","passwordError","isMatch","UNAUTHORIZED","loginStatus","gpsLoc","token","jwt","sign","toJSON","config","jwtSecret","findOneAndUpdateAsync","_id","$set","updatedUser","returnObj","success","message","data","jwtAccessToken","json","error","err123","INTERNAL_SERVER_ERROR","e","login","console","log","userObj","logout","undefined","isAvailable","findOneAndUpdate","userDoc","checkUser","foundUser","send"],"mappings":"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","file":"auth.js","sourceRoot":"../../../../.."}